{"remainingRequest":"C:\\xampp\\htdocs\\game-market\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\game-market\\src\\views\\Marketplace.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\game-market\\src\\views\\Marketplace.vue","mtime":1634033346680},{"path":"C:\\xampp\\htdocs\\game-market\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\game-market\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\xampp\\htdocs\\game-market\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\game-market\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgQWxsaXRlbTogW10sCiAgICAgIEFsbGdhbWU6IFtdLAogICAgICBzZWFyY2hRdWVyeTogIiIsCiAgICAgIHNvcnRHYW1lOiAiIiwKICAgICAgc29ydFByaWNlOiAiIiwgCiAgICAgIHRva2VuOiAiIiwKICAgIH07CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGNvbnN0IHRpcyA9IHRoaXM7CiAgICB0aGlzLmdldHRva2VuKCk7CiAgICB0aGlzLmdldEFsbGdhbWUoKTsKICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICB0aXMuZ2V0RGF0YSgpOwogICAgfSk7CiAgfSwKCiAgbWV0aG9kczogewogICAgZ2V0dG9rZW4oKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KHRoaXMuJEFQSV9VUkwgKyAiL2FwaS92MS90b2tlbi9uZXciKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VuKTsKICAgICAgICBsZXQgRCA9IG5ldyBEYXRlKCk7CiAgICAgICAgRC5zZXRIb3VycyhELmdldEhvdXJzKCkgKyAxKTsKCiAgICAgICAgY29uc29sZS5sb2coRCk7CiAgICAgICAgdGhpcy50b2tlbiA9IHJlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VuOwoKICAgICAgICAvLyAgdGhpcy4kY29va2llLnNldCgidG9rZW4iLCByZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbiwgRCkKCiAgICAgICAgZG9jdW1lbnQuY29va2llID0gInRva2VuPSIgKyByZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbiArICI7IiArIEQ7CiAgICAgICAgLy8gbGV0IHggPSB0aGlzLiRjb29raWVzLmdldCgidG9rZW4iKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyh4KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0QWxsZ2FtZSgpIHsKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5nZXQodGhpcy4kQVBJX1VSTCArICIvYXBpL3YxL2Zyb250ZW5kL2dldGxpc3RnYW1lIikKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuQWxsZ2FtZSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuQWxsZ2FtZSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGF0YSgpIHsKICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBib2R5ID0gbmV3IE9iamVjdCgpOwogICAgICBpZiAodGhpcy5zb3J0R2FtZSAhPSAiIikgewogICAgICAgIGJvZHkgPSB7CiAgICAgICAgICBmaWx0ZXI6IHsKICAgICAgICAgICAgZ2FtZV9pZDogc2VsZi5zb3J0R2FtZSwKICAgICAgICAgICAgc2VhcmNoOiBzZWxmLnNlYXJjaFF1ZXJ5LAogICAgICAgICAgfSwKICAgICAgICAgIHBlcnBhZ2U6IDIwLAogICAgICAgICAgcGFnZTogMSwKICAgICAgICAgIHBhZ2luYXRpb25fb246IGZhbHNlLAogICAgICAgICAgc29ydF9ieTogc2VsZi5zb3J0UHJpY2UsCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBib2R5ID0gewogICAgICAgICAgZmlsdGVyOiB7CiAgICAgICAgICAgIHNlYXJjaDogc2VsZi5zZWFyY2hRdWVyeSwKICAgICAgICAgIH0sCiAgICAgICAgICBwZXJwYWdlOiAyMCwKICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICBwYWdpbmF0aW9uX29uOiBmYWxzZSwKICAgICAgICAgIHNvcnRfYnk6IHNlbGYuc29ydFByaWNlLAogICAgICAgIH07CiAgICAgIH0KICAgICAgY29uc3QgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJGNvb2tpZXMuZ2V0KCJ0b2tlbiIpfWAgfSwKICAgICAgfTsKICAgICAgY29uc29sZS5sb2coYm9keSk7CiAgICAgIHRoaXMuYXhpb3MKICAgICAgICAucG9zdCgKICAgICAgICAgIHRoaXMuJEFQSV9VUkwgKyAiL2FwaS92MS9mcm9udGVuZC9tYXJrZXRwbGFjZS9saXN0aXRlbSIsCiAgICAgICAgICBib2R5LAogICAgICAgICAgY29uZmlnCiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5kYXRhLmxpc3QpOwogICAgICAgICAgdGhpcy5BbGxpdGVtID0gcmVzcG9uc2UuZGF0YS5kYXRhLmxpc3Q7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CiAgICAgICAgICBhbGVydChlcnJvci5yZXNwb25zZS5kYXRhLm1zZy50aCk7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHNlYXJjaFF1ZXJ5KCkgewogICAgICBjb25zdCBzZWxmID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnNlYXJjaFF1ZXJ5KSB7CiAgICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICAgICAgcmV0dXJuIHRoaXMuQWxsaXRlbTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgICBzZWxmLnNlYXJjaFF1ZXJ5ID0gIiI7CiAgICAgICAgcmV0dXJuIHRoaXMuQWxsaXRlbTsKICAgICAgfQogICAgfSwKICAgIHNvcnRHYW1lKCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLnNvcnRHYW1lKTsKICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7CiAgICAgIGlmICh0aGlzLnNvcnRHYW1lICE9ICIiKSB7CiAgICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICAgICAgcmV0dXJuIHRoaXMuQWxsaXRlbTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgICBzZWxmLnNvcnRHYW1lID0gIiI7CiAgICAgICAgcmV0dXJuIHRoaXMuQWxsaXRlbTsKICAgICAgfQogICAgfSwKCiAgICBzb3J0UHJpY2UoKSB7CiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzOwogICAgICBpZiAodGhpcy5zb3J0UHJpY2UgIT0gIiIpIHsKICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgICByZXR1cm4gdGhpcy5BbGxpdGVtOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgIHNlbGYuc29ydFByaWNlID0gIiI7CiAgICAgICAgcmV0dXJuIHRoaXMuQWxsaXRlbTsKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Marketplace.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Marketplace.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"bg-tradeDetail\">\n      <div class=\"content-marketplaceDetail  \">\n        <div style=\"width: 100%;\">\n          <img src=\"/img/Rectangle 270.png\" alt=\"\" style=\"width: 100%;\" />\n        </div>\n      </div>\n    </div>\n\n    <div class=\"bg-third\" id=\"section-third\">\n      <div class=\"container-content\">\n        <div class=\"marketplace-Search-area row\">\n          <div class=\"col-6 col-xs-6 col-md-6 col-lg-7\">\n            <div class=\"input-group-prepend\">\n              <span class=\"\" id=\"basic-addon1\"\n                ><i class=\"fas fa-search\"></i\n              ></span>\n              <input\n                type=\"text\"\n                v-model=\"searchQuery\"\n                placeholder=\"Search Product\"\n              />\n            </div>\n          </div>\n          <div class=\"row col-6 col-xs-6 col-sm-6 col-lg-5\">\n            <div class=\"col-6\">\n              <select\n                class=\" marketplace-fillter-title  dropdown-toggle\"\n                aria-label=\"Default select example\"\n                v-model=\"sortGame\"\n              >\n                <option class=\"dropd-item\" selected value=\"\">All Game</option>\n                <option\n                  :v-if=\"Allgame.length > 0\"\n                  v-for=\"(v, key) in Allgame\"\n                  :key=\"key\"\n                  class=\"dropd-item\"\n                  :value=\"v.id\"\n                  >{{ v.short_name }}</option\n                >\n              </select>\n            </div>\n            <div class=\"col-6\">\n              <select\n                class=\" marketplace-fillter-title  dropdown-toggle\"\n                aria-label=\"Default select example\"\n                v-model=\"sortPrice\"\n              >\n                <option class=\"dropd-item\" selected value=\"\">Sort by</option>\n                <option class=\"dropd-item\" value=\"asc\"\n                  >Price: Low to high</option\n                >\n                <option class=\"dropd-item\" value=\"desc\"\n                  >Price: higt to low</option\n                >\n              </select>\n            </div>\n          </div>\n        </div>\n        <div class=\"content-third-area row\">\n          <div class=\"content-third-item \" id=\"itemGoodPrice\">\n            <div class=\"row\" v-if=\"Allitem.length > 0\">\n              <div\n                class=\"item-grid col-3\"\n                v-for=\"(v, key) in Allitem\"\n                :key=\"key\"\n              >\n                <router-link\n                  class=\"static\"\n                  :to=\"{\n                    path: '/trade/' + v.game_id + '/' + v.id,\n                  }\"\n                >\n                  <img :src=\"$IMG_URL_ITEM+v.picture\" class=\"item-img\" />\n                  <div class=\"item-detail\">\n                    <h2 :style=\"v.color_code\">\n                      {{ v.name.en }}\n                    </h2>\n                    <h1>{{ v.name.th }}</h1>\n                  </div>\n                  <div class=\"row item-detail-price\">\n                    <p>{{ v.amount | number_format }}.-</p>\n                    <button class=\"btn\">Trade</button>\n                  </div>\n                </router-link>\n              </div>\n            </div>\n            <div v-else>\n              <div style=\"color: #fff;\" class=\"text-center\">\n                <h1>ไม่พบไอเท็มที่ ค้นหา</h1>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      Allitem: [],\n      Allgame: [],\n      searchQuery: \"\",\n      sortGame: \"\",\n      sortPrice: \"\", \n      token: \"\",\n    };\n  },\n\n  mounted() {\n    const tis = this;\n    this.gettoken();\n    this.getAllgame();\n    this.$nextTick(function() {\n      tis.getData();\n    });\n  },\n\n  methods: {\n    gettoken() {\n      this.axios.get(this.$API_URL + \"/api/v1/token/new\").then((response) => {\n        // console.log(response.data.access_token);\n        let D = new Date();\n        D.setHours(D.getHours() + 1);\n\n        console.log(D);\n        this.token = response.data.access_token;\n\n        //  this.$cookie.set(\"token\", response.data.access_token, D)\n\n        document.cookie = \"token=\" + response.data.access_token + \";\" + D;\n        // let x = this.$cookies.get(\"token\");\n        // console.log(x);\n      });\n    },\n    getAllgame() {\n      this.axios\n        .get(this.$API_URL + \"/api/v1/frontend/getlistgame\")\n        .then((response) => {\n          this.Allgame = response.data.data;\n          // console.log(this.Allgame);\n        });\n    },\n    getData() {\n      const self = this;\n      var body = new Object();\n      if (this.sortGame != \"\") {\n        body = {\n          filter: {\n            game_id: self.sortGame,\n            search: self.searchQuery,\n          },\n          perpage: 20,\n          page: 1,\n          pagination_on: false,\n          sort_by: self.sortPrice,\n        };\n      } else {\n        body = {\n          filter: {\n            search: self.searchQuery,\n          },\n          perpage: 20,\n          page: 1,\n          pagination_on: false,\n          sort_by: self.sortPrice,\n        };\n      }\n      const config = {\n        headers: { Authorization: `Bearer ${this.$cookies.get(\"token\")}` },\n      };\n      console.log(body);\n      this.axios\n        .post(\n          this.$API_URL + \"/api/v1/frontend/marketplace/listitem\",\n          body,\n          config\n        )\n        .then((response) => {\n          console.log(response.data.data.list);\n          this.Allitem = response.data.data.list;\n        })\n        .catch((error) => {\n          this.errorMessage = error.message;\n          console.log(error.response);\n          alert(error.response.data.msg.th);\n        });\n    },\n  },\n  watch: {\n    searchQuery() {\n      const self = this;\n\n      if (this.searchQuery) {\n        this.getData();\n        return this.Allitem;\n      } else {\n        this.getData();\n        self.searchQuery = \"\";\n        return this.Allitem;\n      }\n    },\n    sortGame() {\n      console.log(this.sortGame);\n      const self = this;\n      if (this.sortGame != \"\") {\n        this.getData();\n        return this.Allitem;\n      } else {\n        this.getData();\n        self.sortGame = \"\";\n        return this.Allitem;\n      }\n    },\n\n    sortPrice() {\n      const self = this;\n      if (this.sortPrice != \"\") {\n        this.getData();\n        return this.Allitem;\n      } else {\n        this.getData();\n        self.sortPrice = \"\";\n        return this.Allitem;\n      }\n    },\n  },\n};\n</script>\n"]}]}