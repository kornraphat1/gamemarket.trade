{"remainingRequest":"C:\\xampp\\htdocs\\game-market\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\game-market\\src\\views\\Trade.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\game-market\\src\\views\\Trade.vue","mtime":1634291037020},{"path":"C:\\xampp\\htdocs\\game-market\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\game-market\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\xampp\\htdocs\\game-market\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\game-market\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGbGlja2l0eSBmcm9tICJmbGlja2l0eSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1haW5faXRlbTogW10sCiAgICAgIEFsbGl0ZW06IFtdLAogICAgICBvdGhlcl9pdGVtOiBbXSwKICAgICAgZ2FtZWlkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuZ2FtZWlkLAogICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICBtYXhjb3VudEl0ZW06ICIiLAogICAgICBzZWxlY3Rjb250SXRlbTogMSwKICAgICAgZ2FtZV9pZDogIiIsCiAgICAgIGl0ZW1faWQ6ICIiLAogICAgfTsKICB9LAoKICBtb3VudGVkKCkgewogICAgLy8gY29uc3Qgc2VsZiA9IHRoaXM7CiAgICB0aGlzLmNoZWNrVG9rZW4oKTsKICAgIHRoaXMuZ2V0RGF0YSgpOwoKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgbG9hZE9uY2UoKSB7CiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwKICAgIGdldERhdGEoKSB7CiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzOwogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgKICAgICAgICAgIHRoaXMuJEFQSV9VUkwgKwogICAgICAgICAgICAiL2FwaS92MS9mcm9udGVuZC9nZXRkZXRhaWx0cmFkZS8iICsKICAgICAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLmdhbWVpZCArCiAgICAgICAgICAgICIvIiArCiAgICAgICAgICAgIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRjb29raWVzLmdldCgidG9rZW5fbWFpbiIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5kYXRhKTsKICAgICAgICAgIHRoaXMubWFpbl9pdGVtID0gcmVzcG9uc2UuZGF0YS5kYXRhLm1haW5faXRlbTsKICAgICAgICAgIHRoaXMuZ2FtZV9pZCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5tYWluX2l0ZW0uZ2FtZV9pZDsKICAgICAgICAgIHRoaXMuaXRlbV9pZCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5tYWluX2l0ZW0uaXRlbV9pZDsKICAgICAgICAgIHRoaXMubWF4Y291bnRJdGVtID0gcmVzcG9uc2UuZGF0YS5kYXRhLm1haW5faXRlbS5xdHk7CiAgICAgICAgICB0aGlzLm90aGVyX2l0ZW0gPSByZXNwb25zZS5kYXRhLmRhdGEub3RoZXJfaXRlbTsKCiAgICAgICAgICBpZiAocGFyc2VJbnQocmVzcG9uc2UuZGF0YS5kYXRhLm1haW5faXRlbS5pdGVtX2lkKSA9PT0gMCkgewogICAgICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogIk15aXRlbXMiLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBzZWxmLmZsa3R5KCk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCgogICAgdHJhZGUoKSB7CiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzOwogICAgICB2YXIgYm9keSA9IG5ldyBPYmplY3QoKTsKCiAgICAgIGJvZHkgPSB7CiAgICAgICAgZ2FtZV9pZDogcGFyc2VJbnQodGhpcy5nYW1lX2lkKSwKICAgICAgICBpdGVtX2lkOiBwYXJzZUludCh0aGlzLml0ZW1faWQpLAogICAgICAgIHRyYWRlX3F0eTogcGFyc2VJbnQodGhpcy5zZWxlY3Rjb250SXRlbSksCiAgICAgIH07CgogICAgICBsZXQgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJGNvb2tpZXMuZ2V0KCJ0b2tlbl9tYWluIil9YCB9LAogICAgICB9OwogICAgICB0aGlzLmF4aW9zCgogICAgICAgIC5wb3N0KHRoaXMuJEFQSV9VUkwgKyAiL2FwaS92MS9mcm9udGVuZC90cmVhZGVteWl0ZW0iLCBib2R5LCBjb25maWcpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgIHNlbGYuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogIk15aXRlbXMiLAogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CiAgICAgICAgICBhbGVydChlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGFkZGNvdW50SXRlbSgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0Y29udEl0ZW0gPCB0aGlzLm1heGNvdW50SXRlbSkgewogICAgICAgIHRoaXMuc2VsZWN0Y29udEl0ZW0gPSBwYXJzZUludCh0aGlzLnNlbGVjdGNvbnRJdGVtKSArIDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoIuC5hOC4oeC5iOC4quC4suC4oeC4suC4o+C4luC5gOC4nuC4t+C5iOC4oeC5hOC4reC5gOC4l+C5h+C4oeC5hOC4lOC5iSDguYTguK3guYDguJfguYfguKHguILguK3guIfguITguLjguJPguYTguKHguYjguYDguJ7guLXguKLguIfguJ7guK0gIik7CiAgICAgIH0KICAgIH0sCiAgICBkZWxjb3VudEl0ZW0oKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGNvbnRJdGVtIDw9IHRoaXMubWF4Y291bnRJdGVtICYmIHRoaXMuc2VsZWN0Y29udEl0ZW0gPiAxKSB7CiAgICAgICAgdGhpcy5zZWxlY3Rjb250SXRlbSA9IHRoaXMuc2VsZWN0Y29udEl0ZW0gLSAxOwogICAgICB9CiAgICB9LAoKICAgIGZsa3R5KCkgewogICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5tYWluLWNhcm91c2VsIik7CiAgICAgIG5ldyBGbGlja2l0eShlbGVtLCB7CiAgICAgICAgLy8gb3B0aW9ucwogICAgICAgIC8vIGdyb3VwQ2VsbHM6IHRydWUsCiAgICAgICAgY2VsbEFsaWduOiAibGVmdCIsCiAgICAgICAgY29udGFpbjogdHJ1ZSwKICAgICAgICBncm91cENlbGxzOiA1LAogICAgICAgIHdyYXBBcm91bmQ6IHRydWUsCiAgICAgICAgcHJldk5leHRCdXR0b25zOiBmYWxzZSwKICAgICAgICBwYWdlRG90czogZmFsc2UsCiAgICAgICAgLy8gZHJhZ2dhYmxlOiBmYWxzZSwKICAgICAgICBvbjogewogICAgICAgICAgZHJhZ1N0YXJ0OiAoKSA9PiB7CiAgICAgICAgICAgIGVsZW0uc3R5bGUucG9pbnRlckV2ZW50cyA9ICJub25lIjsKICAgICAgICAgIH0sCiAgICAgICAgICBkcmFnRW5kOiAoKSA9PiB7CiAgICAgICAgICAgIGVsZW0uc3R5bGUucG9pbnRlckV2ZW50cyA9ICJhbGwiOwogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Trade.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgNA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Trade.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div\n      class=\"modal fade\"\n      id=\"ModalConfirm\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"ModalConfirmLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog modal-lg\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <div>\n              <div class=\"user-text\">\n                <h4>ยืนยันการแลกเปลี่ยน</h4>\n              </div>\n            </div>\n\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"row confirm-row \">\n              <div class=\"col-3 \"></div>\n              <div class=\"col-3\"></div>\n              <div class=\"col-2  d-flex justify-content-center\">\n                <div>\n                  <span>ราคาต่อชิ้น</span>\n                </div>\n              </div>\n              <div class=\"col-2 d-flex justify-content-center\">\n                <span>จำนวน</span>\n              </div>\n              <div class=\"col-2  d-flex justify-content-center\">\n                <div>\n                  <span>ราคารวม</span>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"row confirm-row \">\n              <div class=\"col-3 \">\n                <div class=\"img-tradeDetail \">\n                  <img\n                    :src=\"$IMG_URL_ITEM + main_item.picture\"\n                    class=\"item-img-detail\"\n                  />\n                </div>\n              </div>\n              <div class=\"col-3\">\n                <h2\n                  class=\"tradeDetail-name-eng\"\n                  :style=\"main_item.color_code | color_sty\"\n                >\n                  {{ main_item.name.en }}\n                </h2>\n                <h6>\n                  {{ main_item.name.th }}\n                </h6>\n              </div>\n              <div class=\"col-2  d-flex justify-content-center\">\n                <div>\n                  <h5>฿{{ main_item.amount | number_format }}</h5>\n                </div>\n              </div>\n              <div class=\"col-2 d-flex justify-content-center\">\n                <h5>{{ selectcontItem }}</h5>\n              </div>\n              <div class=\"col-2 d-flex justify-content-center\">\n                <div>\n                  <h5>\n                    ฿{{ (main_item.amount * selectcontItem) | number_format }}\n                  </h5>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"modal-footer\">\n            <div class=\"row\">\n              <button\n                class=\"btn btn-confirm\"\n                data-dismiss=\"modal\"\n                @click=\"trade()\"\n              >\n                ขายไอเท็ม\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"bg-tradeDetail\">\n      <div class=\"container-main content-tradeDetail \">\n        <div class=\"row \">\n          <div class=\"col-6  tradeDetail-left\">\n            <div class=\"img-tradeDetail \">\n              <img\n                :src=\"$IMG_URL_ITEM + main_item.picture\"\n                class=\"item-img-detail\"\n              />\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"text-tradeDetail \">\n              <div class=\"tradeDetail-name\">\n                <h2\n                  class=\"tradeDetail-name-eng\"\n                  :style=\"main_item.color_code | color_sty\"\n                >\n                  {{ main_item.name.en }}\n                </h2>\n                <h2>{{ main_item.name.th }}</h2>\n                <div class=\"tradeDetail-star\">\n                  <i class=\"fas fa-star\"></i>\n                  <i class=\"fas fa-star\"></i>\n                  <i class=\"fas fa-star\"></i>\n                  <i class=\"fas fa-star\"></i>\n                  <i class=\"fas fa-star\"></i>\n                </div>\n              </div>\n              <div class=\"tradeDetail-price\">\n                <h3>price</h3>\n                <h2>{{ main_item.amount | number_format }} ฿</h2>\n                <h6>( คุณมีไอเท็ม {{ maxcountItem }} ชิ้น )</h6>\n              </div>\n              <div class=\"tradeDetail-price row\">\n                <button\n                  class=\"btn btn-stock \"\n                  style=\"background-color: #FF1A01; margin-left: 0px;\"\n                  id=\"delcount\"\n                  @click=\"delcountItem()\"\n                  :disabled=\"selectcontItem == 1\"\n                >\n                  -\n                </button>\n                <span>{{ selectcontItem }}</span>\n                <button\n                  class=\"btn btn-stock \"\n                  style=\"background-color: #FDC018;\"\n                  id=\"addcount\"\n                  @click=\"addcountItem()\"\n                  :disabled=\"selectcontItem == maxcountItem\"\n                >\n                  +\n                </button>\n              </div>\n              <div class=\"tradeDetail-price row\">\n                <button\n                  class=\"btn-Trade btn\"\n                  data-toggle=\"modal\"\n                  data-target=\"#ModalConfirm\"\n                >\n                  Trade\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"empty-space\"></div>\n\n        <div class=\"content-trade-orderGame ontainer-orderGame\">\n          <div class=\"content-third-orderGame col-12\" style=\"\">\n            <h2>ไอเท็มของคุณ จากเกมส์อื่นๆ</h2>\n          </div>\n          <div class=\"content-third-item\" id=\"Allitemswp\">\n            <div class=\"main-carousel\" v-if=\"other_item.length > 0\">\n              <div\n                class=\"carousel-cell-itemtread\"\n                v-for=\"(v, key) in other_item\"\n                :key=\"key\"\n              >\n                <div class=\"item-tread\">\n                  <div class=\"item-detail-tread\">\n                    <router-link\n                      :to=\"{\n                        path: '/trade/' + v.game_id + '/' + v.item_id,\n                      }\"\n                      @click.native=\"loadOnce()\"\n                    >\n                      <h1>{{ v.name.en }}</h1>\n                    </router-link>\n                  </div>\n                 \n                </div>\n <div class=\"row item-detail-price-tread\">\n                    <p>{{ v.amount | number_format }}.-</p>\n                  \n                  </div>\n                <img :src=\"$IMG_URL_ITEM + v.picture\" class=\"item-img-tread\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Flickity from \"flickity\";\n\nexport default {\n  data() {\n    return {\n      main_item: [],\n      Allitem: [],\n      other_item: [],\n      gameid: this.$route.params.gameid,\n      id: this.$route.params.id,\n      maxcountItem: \"\",\n      selectcontItem: 1,\n      game_id: \"\",\n      item_id: \"\",\n    };\n  },\n\n  mounted() {\n    // const self = this;\n    this.checkToken();\n    this.getData();\n\n    // console.log(this.$route.params.id);\n  },\n\n  methods: {\n    loadOnce() {\n      location.reload();\n    },\n    getData() {\n      const self = this;\n      this.axios\n        .get(\n          this.$API_URL +\n            \"/api/v1/frontend/getdetailtrade/\" +\n            this.$route.params.gameid +\n            \"/\" +\n            this.$route.params.id,\n          {\n            headers: {\n              Authorization: `Bearer ${this.$cookies.get(\"token_main\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          console.log(response.data.data);\n          this.main_item = response.data.data.main_item;\n          this.game_id = response.data.data.main_item.game_id;\n          this.item_id = response.data.data.main_item.item_id;\n          this.maxcountItem = response.data.data.main_item.qty;\n          this.other_item = response.data.data.other_item;\n\n          if (parseInt(response.data.data.main_item.item_id) === 0) {\n            self.$router.push({\n              name: \"Myitems\",\n            });\n          }\n          this.$nextTick(function() {\n            self.flkty();\n          });\n        });\n    },\n\n    trade() {\n      const self = this;\n      var body = new Object();\n\n      body = {\n        game_id: parseInt(this.game_id),\n        item_id: parseInt(this.item_id),\n        trade_qty: parseInt(this.selectcontItem),\n      };\n\n      let config = {\n        headers: { Authorization: `Bearer ${this.$cookies.get(\"token_main\")}` },\n      };\n      this.axios\n\n        .post(this.$API_URL + \"/api/v1/frontend/treademyitem\", body, config)\n        .then((response) => {\n          console.log(response.data);\n          self.$router.push({\n            name: \"Myitems\",\n          });\n        })\n        .catch((error) => {\n          this.errorMessage = error.message;\n          console.log(error.response);\n          alert(error);\n        });\n    },\n\n    addcountItem() {\n      if (this.selectcontItem < this.maxcountItem) {\n        this.selectcontItem = parseInt(this.selectcontItem) + 1;\n      } else {\n        alert(\"ไม่สามารถเพื่มไอเท็มได้ ไอเท็มของคุณไม่เพียงพอ \");\n      }\n    },\n    delcountItem() {\n      if (this.selectcontItem <= this.maxcountItem && this.selectcontItem > 1) {\n        this.selectcontItem = this.selectcontItem - 1;\n      }\n    },\n\n    flkty() {\n      var elem = document.querySelector(\".main-carousel\");\n      new Flickity(elem, {\n        // options\n        // groupCells: true,\n        cellAlign: \"left\",\n        contain: true,\n        groupCells: 5,\n        wrapAround: true,\n        prevNextButtons: false,\n        pageDots: false,\n        // draggable: false,\n        on: {\n          dragStart: () => {\n            elem.style.pointerEvents = \"none\";\n          },\n          dragEnd: () => {\n            elem.style.pointerEvents = \"all\";\n          },\n        },\n      });\n    },\n  },\n};\n</script>\n"]}]}